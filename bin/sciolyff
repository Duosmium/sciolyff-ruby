#!/usr/bin/env ruby
# frozen_string_literal: true

require 'optimist'
require 'sciolyff'

opts = Optimist.options do
  version 'sciolyff 1.0.0'
  banner <<~STRING
    Checks if a given file is in the Scioly File Format

    Usage:
            #{File.basename(__FILE__)} [options] <file>

    where [options] are:
  STRING
  opt :loglevel, 'Log verbosity from 0 to 3', default: 1
end

puts 'More than one file given, ignoring all but first.' if ARGV.length > 1

validator = SciolyFF::Validator.new opts[:loglevel]
validity = validator.valid? ARGV.first
print validator.last_log

exit validity
